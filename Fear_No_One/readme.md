# 火焰纹章（样品版本）

![游戏封面.png](https://s2.loli.net/2022/07/22/FEWuKmMzYx5Xhkp.png"游戏封面")

​								-该游戏用作于科林比赛项目
​								-仅测试样例版本
​								-开发语言:c++  /  平台: qt
​                                -联系方式： 601295683@qq.com
​					                                   575500603@qq.com
​                                                       216421866457@qq.com


​													
​																													



​																									--科林小组-Fear_No_One

----

## Part1. 游戏介绍

- 游戏仿写于2002年上线的gba游戏 《[火焰之纹章：封印之剑](https://baike.baidu.com/item/火焰之纹章：封印之剑/6755966)》 

  

- 游戏分为**单机模式（人机对战闯关模式）**和 **多人模式（多人对战）**在单机模式下 玩家将以角色扮演的模式 体验 主人公罗伊所面临的战争 而多人模式支持玩家之间相互战斗pk

- 游戏以战旗（[ SRPG ](https://baike.baidu.com/item/SRPG)）的模式开展 测试1版本主要实现根基的游戏实现 简单的设计了几个对战情景 目的是简单的介绍游戏玩法和功能 在后续的版本中我们将以剧情和策略为主要切入点 将玩家带入到 主人公罗伊的世界中。 

## Part2. 游戏背景与框架

游戏背景：

- 本作的故事发生在一块名为艾雷布的大陆。大陆东方的贝伦王国突然发动战争，战火席卷整个大陆，由众多小国组成的联盟国家——利西亚同盟正陷入危机。这时，诸侯之一费雷侯的公子[罗伊](https://baike.baidu.com/item/罗伊/9093534)，代替重病的父亲，投入到反抗贝伦入侵的战争中（***游戏宏观背景扩展***[^附录1.宏观世界观]）
- 主人公： 罗伊

游戏框架：

- 游戏以闯关制度为基础 以战旗为具体关卡内容；
- 游戏中资源 士兵 等以整个游戏为单位 闯关过程中为分配一部分的士兵与资源参加战役（某一章节关卡）；
- 具体关卡中 我们绘制每一个关卡单独的地图（在游戏内部以数组信息化的储存）之后进入某一章节的时候 我们调用对应章节的地图信息 敌人分布信息 贴图绘制界面
- 游戏支持存档 读档（包括资源士兵信息 包括游戏进度）



<img src="https://s2.loli.net/2022/07/22/bYJl1ezIyTVArhR.png" alt="游戏图片.png" title="游戏图片" style="zoom:70%;" />



## Part3.游戏玩法

1. 胜利条件与败北条件：

   己方胜利条件在不同关卡中 大致分为三种：

   1. 敌全歼 
   2. 斩首 
   3. 占领王座 

   ​    而败北条件则为

   1. 主人公罗伊阵亡

2. 游戏开展 ：游戏以策略为主 分为我方回合和敌方回合 两方回合交替进行 直至达到胜利条件 

3. 回合结束 ：每一回合各方将控制己方士兵走到指定位置 进行指定的行动 达到相应的效果 之后单一士兵的回合结束 当己方所有的士兵回合均结束或者主动结束回合 则己方回合结束 对方回合开始

4. 战斗流程 ： 每一个士兵都有以下三个阶段 

   ​	4.1.选中 我们用鼠标选中地图上的士兵单位

   ​	4.2.移动 通过键盘 通过bfs即时计算当前地形士兵所能到达的所有距离并且通过vector 返回到游戏界面并且绘制

   ​	4.3.交互 士兵通过在自己的移动范围内进行移动 与终点范围内的友方和地方分别产生不同种类的 交互界面；

   ​		4.3.1 交换：与指定友军交换物品栏内的物品

   ​		4.3.2 救出（仅限于骑兵）：把友军装在自己的马鞍上携带友军进行二次移动；

   ​		4.3.3 攻击 ：对敌军单位进行攻击 攻击时 双方均可以进行一次攻击 如果 攻击方击速度更大 则可进行两次攻击 攻击的伤害采用即时计算（包含暴击 躲避的随机化处理）由独立的函数负责

   ​		4.3.4 物品：可使用身上的物品 （药水 转职徽章 切换武器等等）

   ​		4.3.5 王座：与地形交互 占领王座（有可能的胜利条件）

   ​		*4.3.6 村庄： 与地形交互 可和当地村民对话 获得帮助或者隐藏奖励 

   ​		*4.3.7 竞技场：与地形交互 进入竞技场 与敌人竞技以获得赏金

## Part4.游戏特点

- 游戏主要通过回合制展开
- 1.游戏特点 ： 由于是角色扮演游戏 游戏区别于普通的单机闯关游戏 游戏过程中每个**友方单位都有自己的名字 故事和剧情** 当友方单位在某一次关卡中阵亡其将**永久阵亡**– 由于只是测试版 我们暂时忽略掉人物剧情而聚焦于玩法的实现由后续不断在框架上补充个人背景故事[^附录2.部分人物介绍]
- 2.游戏有丰富的职业选择[^附录3.人物设定/职业设定]和武器设定 [^附录4.武器系统]
- 3.游戏具有良好，独立于原作引用了**多人对战系统** 以及**即时性的战斗分析**
- 4.游戏并非一味的继承于原有的游戏背景仅作为仿写版 而是借用原有游戏的背景世界观 衍生出新的作品 承载新的故事
- *5.原游戏诞生于2002年为gba版本 我们利用的qt平台 更加拓展了原游戏的可能性 有更多更丰富的可拓展空间我们支持武器装备的自定义 地图自定义 乃至于人物自定义
- *6.游戏有较好的封闭性 我们采用数据库与加密的传输方式 防止了恶意的篡改游戏数据 

## 多人模式：测试版中仅写了部分后台数据 但是还没有成型

1. 战斗与单机模式差异不大 新增了战争迷雾以及视野控制
2. 我们采用tcp 的方式 建立起玩家与服务端之间的链接 玩家每次移动以及刚开始 会接收到服务端传送回来的数组：mapable 每一次对于地图的渲染 我们优先调查mapable数组中是否可见当前位置的地形 如果不可见同一指定为迷雾；
3. 玩法实现：
   1. 胜利条件： 斩首
   2. 战争迷雾 掩盖原有地形 更替为迷雾
   3. 草丛地形的交互 草丛位置具有单向的视野可见
   4. 经过路径除草丛变为可视





### 测试版进度

​    截止7.29日 我们实现了

- 完整的游戏进度检测制度

- 完整的读档存档

- 完整的我方战斗机制 装备选择 战斗画面以及战斗数据的 即时处理

- 完整的人机自动移动与战斗机制

- 完整的地图布置 支线布置（足够的拓展性）

- 文件中保留了大量的 未设置角色 、地图、音乐特效、武器等等

- 第一关的完整关卡设计 

  因为游戏仅是测试阶段 所以我们在的工作集中在了游戏后台的铺设 简单的实现了 关卡一的设计 所以对于后续游戏的继续开发 我们所仅仅需要初始化各种各样的地图 ， 各种各样的武器 ， 各种各样的人物 即可实现内容的扩充 ，可以说现在的游戏版本更类似与一个完整的系统 支持简单的设计就能拓展出全新的关卡 甚至可以添加剧情串联各个关卡 或者 自定义战役；



---



[^附录1.宏观世界观]:•人龙战役与八神器•很久以前，共同生活在艾雷布大陆上的人与龙和睦相处，互不侵犯，过着祥和的生活。但在大约1000年前，为争夺大陆的霸权，双方在每一寸土地上展开厮杀，从而演化成了一场连自然规律都改变了的恶战。最后，龙族战败，从大陆上消失了。•自“人龙战役”结束之后，那八位引导着人类取得胜利的英雄，英雄哈尔特穆德、圣女爱莉米奴、神骑兵哈农、骑士巴利冈、狂战士迪鲁汉、大贤者阿特斯、勇者罗兰和暗之贤者普拉米蒙德就被人们尊称为"八神将"，他们所持武器被称为神将器。“人龙战役”后，经历了千年的时间，没有了天敌的人类在艾雷布大陆上铸造了繁荣的文化。•首先在西方，名声显赫的艾特鲁里亚王国，拥有悠久的历史文化。•东方的伯尔尼王国，具备独特的文化底蕴以及坚韧的民族特性。•在两大国之间还有许多小势力：由南方众多领主联合起来的利西亚同盟，在北方伊利亚地区与当地民众一同开垦荒地的骑士团，在东方萨卡地区广阔草原上生活的游牧部族。•一直以来，虽然各个势力之间也存在一些小冲突，但整体来说还是保持者和平的景象。•但是有一天，这和平的景象随着伯尔尼国王塞菲尔下令对周边地区开始入侵而消失了。伯尔尼军首先攻入了萨卡和伊利亚地区，势如破竹。之后，侵略者又盯上了利西亚地区……掌管利西亚东部菲雷地区的艾利乌德侯爵之子[罗伊](https://baike.baidu.com/item/罗伊/9093534)为了继任领主正在利西亚大都市奥斯迪亚留学，艾利乌德的好友，奥斯迪亚侯爵赫克托耳的爱女[莉莉娜](https://baike.baidu.com/item/莉莉娜/13132374)这时前来菲雷参观，病中的艾利乌德突然命令罗伊回国。





[^附录2.部分人物介绍]:![人物介绍1.png](https://s2.loli.net/2022/07/22/ry7YtAxMRa6pmhv.png "人物介绍1")![人物介绍2.png](https://s2.loli.net/2022/07/22/KpzC3cJ64uHmjoP.png"人物介绍2")






[^附录3.人物设定/职业设定]:职业介绍
| 职业 | 进阶 |职业介绍|
| :--: | :--: | :-- |
| 领主 | 大领主| 主人公罗伊的职业，最重要的角色。一旦战败则游戏结束。|
| 剑士 | 剑圣 | 技术速度优秀的剑术高手，能够使用高必杀的东方之剑。|
| 佣兵 | 勇者 | 主要使用剑作战，属性平衡，攻守兼备的角色。|
|战士|勇士|使用斧作战的暴汉。力量强大而守备差。|
|山贼/海贼|狂战士|与战士相似而可以在高山（山贼）和海中（海贼）移动。|
|轻骑士|圣骑士|骑在马上，有着高移动力的骑士。攻击守备速度平衡。|
|重甲骑士|将军|身着重铠的骑士。守备优秀，但速度和移动力不足。|
|天马骑士|隼骑士|驾驭天马的骑士，移动不受地形影响。攻击和防御一般，速度和魔防优秀，害怕弓箭。|
|龙骑士|龙骑统帅|驾驭飞龙的骑士，移动不受地形影响。攻击和防御很强，除了魔法和弓箭以外没什么弱点。|
|弓箭手|狙击手|穿着轻甲用弓作战的士兵。能够使用弓箭和弩车进行远程攻击，但不能近程作战|
|游牧民|游牧骑士|骑马的东方士兵，能够骑在马上使用弓箭|
|僧侣/修女|司祭|使用圣杖救助我方的神职者。转职前不能作战，转职后使用光魔法。|
|神官骑士|女武神|骑在马上使用圣杖的少女。转职前不能作战，转职后使用理魔法。|
|魔法师|贤者|使用自然之力理魔法的魔法师。远程近程皆能，但对物理攻击抵抗较弱。|
|巫师|德鲁伊|使用古代的暗魔法的魔法师。魔力比魔法师高但速度较慢。|





[^附录4.武器系统]: 武器系统![附录4.武器系统.png](https://s2.loli.net/2022/07/22/JxNHc1hiDVkTBfg.png"武器系统")↩
**武器种类**
游戏的武器分为剑、枪、斧、弓、理、暗、光、杖八种。不同职业可以使用的武器各不相同，不同的类型武器属性各有特点。

**武器等级**
武器分为不同的等级，从低到高有六级，用E、D、C、B、A、S表示。武器等级越高，威力越强。
角色使用武器就能提高熟练度，熟练度积累可以提高能使用的武器等级。

**武器相性**
剑、枪、斧三种武器，理、暗、光三种魔法之间存在着三相循环相克的关系。例如：我方用剑攻击装备斧的敌人，我方攻击力和命中率上升，敌方反之。
但是游戏中也存在着少数“逆相克”武器，例如：克枪剑，需要注意。

**使用次数**
游戏中的武器和道具都有使用次数的设定。当武器命中敌人时耐久度减少；魔法、杖和道具无论命中与否，只要使用耐久就会减少。耐久度为0时武器或道具就会消失。所以，在得到强力的武器和道具之后，注意使用的时机是十分有必要的





